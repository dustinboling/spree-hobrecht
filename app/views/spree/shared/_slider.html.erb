<% if Spree::Slide.published.count > 0 %>

  <div id="slider" class="idealSlider">
    <% Spree::Slide.published.order('position ASC').each do |s| %>
      <% if s.body != "" %>
        <%= link_to image_tag('', :data => { :src => s.slide_image.url, :caption => '#' + s.slide_name.to_url }), url_for(s.slide_link) %>
      <% else %>
        <%= link_to image_tag('', :data => { :src => s.slide_image.url }), url_for(s.slide_link) %>
      <% end %>
    <% end %>
  </div>

  <% Spree::Slide.published.order('position ASC').each do |s| %>
    <div id="<%= s.slide_name.to_url %>" class="ideal-html-caption" style="display:none;">
      <%= raw s.body %>
    </div>
  <% end %>


  <script type="text/javascript">
  $(window).load(function() {
      var slider = new IdealImageSlider.Slider({
        selector: '#slider',
        height: 600,
        effect: 'fade',
        interval: 10000,
        transitionDuration: 3000
      });
      slider.addCaptions();
      //slider.addBulletNav();
      slider.start();
  });
  </script>
<% end %>
